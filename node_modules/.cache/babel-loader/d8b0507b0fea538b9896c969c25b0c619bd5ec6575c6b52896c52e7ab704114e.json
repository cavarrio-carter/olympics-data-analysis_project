{"ast":null,"code":"import { show } from '../utils/style';\nconst adjustPosition = (target, edge) => {\n  const [[minEdgeX, minEdgeY], [maxEdgeX, maxEdgeY]] = edge;\n  const [[minX, minY], [maxX, maxY]] = target;\n  let changeX = 0,\n    changeY = 0;\n  // x-axis\n  if (minX < minEdgeX) {\n    changeX = minEdgeX - minX;\n  } else if (maxX > maxEdgeX) {\n    changeX = maxEdgeX - maxX;\n  }\n  // y-axis\n  if (minY < minEdgeY) {\n    changeY = minEdgeY - minY;\n  } else if (maxY > maxEdgeY) {\n    changeY = maxEdgeY - maxY;\n  }\n  return [changeX, changeY];\n};\n/**\n * adjust the label when exceed the plot\n */\nexport const ExceedAdjust = () => {\n  return (labels, {\n    canvas\n  }) => {\n    const {\n      width,\n      height\n    } = canvas.getConfig();\n    labels.forEach(l => {\n      show(l);\n      const {\n        max,\n        min\n      } = l.getRenderBounds();\n      const [xMax, yMax] = max,\n        [xMin, yMin] = min;\n      const changeValue = adjustPosition([[xMin, yMin], [xMax, yMax]], [[0, 0], [width, height]]);\n      // For label with connectorPoints\n      if (l.style.connector && l.style.connectorPoints) {\n        l.style.connectorPoints[0][0] -= changeValue[0];\n        l.style.connectorPoints[0][1] -= changeValue[1];\n      }\n      l.style.x += changeValue[0];\n      l.style.y += changeValue[1];\n    });\n    return labels;\n  };\n};","map":{"version":3,"names":["show","adjustPosition","target","edge","minEdgeX","minEdgeY","maxEdgeX","maxEdgeY","minX","minY","maxX","maxY","changeX","changeY","ExceedAdjust","labels","canvas","width","height","getConfig","forEach","l","max","min","getRenderBounds","xMax","yMax","xMin","yMin","changeValue","style","connector","connectorPoints","x","y"],"sources":["label-transform/exceedAdjust.ts"],"sourcesContent":[null],"mappings":"AAIA,SAASA,IAAI,QAAQ,gBAAgB;AAErC,MAAMC,cAAc,GAAGA,CAACC,MAAc,EAAEC,IAAY,KAAI;EACtD,MAAM,CAAC,CAACC,QAAQ,EAAEC,QAAQ,CAAC,EAAE,CAACC,QAAQ,EAAEC,QAAQ,CAAC,CAAC,GAAGJ,IAAI;EACzD,MAAM,CAAC,CAACK,IAAI,EAAEC,IAAI,CAAC,EAAE,CAACC,IAAI,EAAEC,IAAI,CAAC,CAAC,GAAGT,MAAM;EAE3C,IAAIU,OAAO,GAAG,CAAC;IACbC,OAAO,GAAG,CAAC;EAEb;EACA,IAAIL,IAAI,GAAGJ,QAAQ,EAAE;IACnBQ,OAAO,GAAGR,QAAQ,GAAGI,IAAI;GAC1B,MAAM,IAAIE,IAAI,GAAGJ,QAAQ,EAAE;IAC1BM,OAAO,GAAGN,QAAQ,GAAGI,IAAI;;EAG3B;EACA,IAAID,IAAI,GAAGJ,QAAQ,EAAE;IACnBQ,OAAO,GAAGR,QAAQ,GAAGI,IAAI;GAC1B,MAAM,IAAIE,IAAI,GAAGJ,QAAQ,EAAE;IAC1BM,OAAO,GAAGN,QAAQ,GAAGI,IAAI;;EAG3B,OAAO,CAACC,OAAO,EAAEC,OAAO,CAAC;AAC3B,CAAC;AAID;;;AAGA,OAAO,MAAMC,YAAY,GAA6BA,CAAA,KAAK;EACzD,OAAO,CAACC,MAAuB,EAAE;IAAEC;EAAM,CAAE,KAAI;IAC7C,MAAM;MAAEC,KAAK;MAAEC;IAAM,CAAE,GAAGF,MAAM,CAACG,SAAS,EAAE;IAE5CJ,MAAM,CAACK,OAAO,CAAEC,CAAC,IAAI;MACnBrB,IAAI,CAACqB,CAAC,CAAC;MACP,MAAM;QAAEC,GAAG;QAAEC;MAAG,CAAE,GAAGF,CAAC,CAACG,eAAe,EAAE;MACxC,MAAM,CAACC,IAAI,EAAEC,IAAI,CAAC,GAAGJ,GAAG;QACtB,CAACK,IAAI,EAAEC,IAAI,CAAC,GAAGL,GAAG;MACpB,MAAMM,WAAW,GAAG5B,cAAc,CAChC,CACE,CAAC0B,IAAI,EAAEC,IAAI,CAAC,EACZ,CAACH,IAAI,EAAEC,IAAI,CAAC,CACb,EACD,CACE,CAAC,CAAC,EAAE,CAAC,CAAC,EACN,CAACT,KAAK,EAAEC,MAAM,CAAC,CAChB,CACF;MACD;MACA,IAAIG,CAAC,CAACS,KAAK,CAACC,SAAS,IAAIV,CAAC,CAACS,KAAK,CAACE,eAAe,EAAE;QAChDX,CAAC,CAACS,KAAK,CAACE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIH,WAAW,CAAC,CAAC,CAAC;QAC/CR,CAAC,CAACS,KAAK,CAACE,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIH,WAAW,CAAC,CAAC,CAAC;;MAEjDR,CAAC,CAACS,KAAK,CAACG,CAAC,IAAIJ,WAAW,CAAC,CAAC,CAAC;MAC3BR,CAAC,CAACS,KAAK,CAACI,CAAC,IAAIL,WAAW,CAAC,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEF,OAAOd,MAAM;EACf,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}