{"ast":null,"code":"import { arc } from 'd3-shape';\nimport { CSS, PropertySyntax } from '@antv/g';\nimport { getArcObject } from '../shape/utils';\nimport { isPolar } from '../utils/coordinate';\nimport { ScaleInX } from './scaleInX';\n/**\n * Transform mark from transparent to solid.\n */\nexport const WaveIn = (options, context) => {\n  const ZERO = 0.0001;\n  // @see https://g-next.antv.vision/zh/docs/api/css/css-properties-values-api#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7\n  CSS.registerProperty({\n    name: 'waveInArcAngle',\n    inherits: false,\n    initialValue: '',\n    interpolable: true,\n    syntax: PropertySyntax.NUMBER\n  });\n  const {\n    coordinate\n  } = context;\n  return (from, to, defaults) => {\n    const [shape] = from;\n    if (!isPolar(coordinate)) {\n      return ScaleInX(options, context)(from, to, defaults);\n    }\n    const {\n      __data__,\n      style\n    } = shape;\n    const {\n      radius = 0,\n      inset = 0,\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1\n    } = style;\n    const {\n      points,\n      y,\n      y1\n    } = __data__;\n    const path = arc().cornerRadius(radius).padAngle(inset * Math.PI / 180);\n    const arcObject = getArcObject(coordinate, points, [y, y1]);\n    const {\n      startAngle,\n      endAngle\n    } = arcObject;\n    const keyframes = [\n    // Use custom interpolable CSS property.\n    {\n      waveInArcAngle: startAngle + ZERO,\n      fillOpacity: 0,\n      strokeOpacity: 0,\n      opacity: 0\n    }, {\n      waveInArcAngle: startAngle + ZERO,\n      fillOpacity,\n      strokeOpacity,\n      opacity,\n      offset: 0.01\n    }, {\n      waveInArcAngle: endAngle,\n      fillOpacity,\n      strokeOpacity,\n      opacity\n    }];\n    const animation = shape.animate(keyframes, Object.assign(Object.assign({}, defaults), options));\n    animation.onframe = function () {\n      shape.style.d = path(Object.assign(Object.assign({}, arcObject), {\n        endAngle: Number(shape.style.waveInArcAngle)\n      }));\n    };\n    animation.onfinish = function () {\n      shape.style.d = path(Object.assign(Object.assign({}, arcObject), {\n        endAngle: endAngle\n      }));\n    };\n    return animation;\n  };\n};\nWaveIn.props = {};","map":{"version":3,"names":["arc","CSS","PropertySyntax","getArcObject","isPolar","ScaleInX","WaveIn","options","context","ZERO","registerProperty","name","inherits","initialValue","interpolable","syntax","NUMBER","coordinate","from","to","defaults","shape","__data__","style","radius","inset","fillOpacity","strokeOpacity","opacity","points","y","y1","path","cornerRadius","padAngle","Math","PI","arcObject","startAngle","endAngle","keyframes","waveInArcAngle","offset","animation","animate","Object","assign","onframe","d","Number","onfinish","props"],"sources":["animation/waveIn.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}