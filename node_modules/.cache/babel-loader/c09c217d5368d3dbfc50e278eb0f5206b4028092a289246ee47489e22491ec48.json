{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Path, AABB } from '@antv/g';\nimport { path as d3Path } from 'd3-path';\nimport { sort } from 'd3-array';\nimport { filter } from '@antv/util';\nimport { select } from '../utils/selection';\nimport { mapObject } from '../utils/array';\nimport { ELEMENT_CLASS_NAME, PLOT_CLASS_NAME } from '../runtime';\nimport { isOrdinalScale } from '../utils/scale';\nimport { rect } from '../shape/interval/color';\nimport { isPolar, isTranspose } from '../utils/coordinate';\nimport { getStyle } from '../utils/style';\nimport { reorder } from '../shape/utils';\nimport { angle, angleBetween, sub } from '../utils/vector';\n/**\n * Given root of chart returns elements to be manipulated\n */\nexport function selectG2Elements(root) {\n  return select(root).selectAll(`.${ELEMENT_CLASS_NAME}`).nodes().filter(d => !d.__removed__);\n}\nexport function selectFacetG2Elements(target, viewInstances) {\n  return selectFacetViews(target, viewInstances).flatMap(({\n    container\n  }) => selectG2Elements(container));\n}\nexport function selectFacetViews(target, viewInstances) {\n  return viewInstances.filter(d => d !== target && d.options.parentKey === target.options.key);\n}\nexport function selectPlotArea(root) {\n  return select(root).select(`.${PLOT_CLASS_NAME}`).node();\n}\nexport function bboxOf(element) {\n  // The geometry bounds of a group is empty, so return the render bounds.\n  if (element.tagName === 'g') return element.getRenderBounds();\n  // Compute the geometry bounds related to the parent.\n  const bounds = element.getGeometryBounds();\n  const aabb = new AABB();\n  aabb.setFromTransformedAABB(bounds, element.getWorldTransform());\n  return aabb;\n}\nexport function mousePosition(target, event) {\n  const {\n    offsetX,\n    offsetY\n  } = event;\n  const bbox = bboxOf(target);\n  const {\n    min: [x, y],\n    max: [x1, y1]\n  } = bbox;\n  const isOutX = offsetX < x || offsetX > x1;\n  const isOutY = offsetY < y || offsetY > y1;\n  if (isOutX || isOutY) return null;\n  return [offsetX - x, offsetY - y];\n}\n/**\n * @todo Pass bbox rather than calc it here.\n */\nexport function brushMousePosition(target, event) {\n  const {\n    offsetX,\n    offsetY\n  } = event;\n  const [x, y, x1, y1] = boundsOfBrushArea(target);\n  return [Math.min(x1, Math.max(x, offsetX)) - x, Math.min(y1, Math.max(y, offsetY)) - y];\n}\nexport function boundsOfBrushArea(target) {\n  // Calc bbox after clipping.\n  const bbox = target.getRenderBounds();\n  const {\n    min: [x0, y0],\n    max: [x1, y1]\n  } = bbox;\n  return [x0, y0, x1, y1];\n}\nexport function createColorKey(view) {\n  return element => element.__data__.color;\n}\nexport function createXKey(view) {\n  return element => element.__data__.x;\n}\nexport function createDatumof(view) {\n  const views = Array.isArray(view) ? view : [view];\n  const keyData = new Map(views.flatMap(view => {\n    const marks = Array.from(view.markState.keys());\n    return marks.map(mark => [keyed(view.key, mark.key), mark.data]);\n  }));\n  return element => {\n    const {\n      index,\n      markKey,\n      viewKey\n    } = element.__data__;\n    const data = keyData.get(keyed(viewKey, markKey));\n    return data[index];\n  };\n}\n/**\n * A state manager for G2Element.\n * The keys for each state's style start with the state name.\n * { selectedFill, selectedStroke } is for selected state.\n * { unselectedFill, unselectedStroke } is for unselected state.\n */\nexport function useState(style, valueof = (d, element) => d, setAttribute = (element, key, v) => element.setAttribute(key, v)) {\n  const STATES = '__states__';\n  const ORIGINAL = '__ordinal__';\n  // Mix style for each state and apply it to element.\n  const updateState = element => {\n    const {\n      [STATES]: states = [],\n      [ORIGINAL]: original = {}\n    } = element;\n    const stateStyle = states.reduce((mixedStyle, state) => Object.assign(Object.assign({}, mixedStyle), style[state]), original);\n    if (Object.keys(stateStyle).length === 0) return;\n    for (const [key, value] of Object.entries(stateStyle)) {\n      const currentValue = getStyle(element, key);\n      const v = valueof(value, element);\n      setAttribute(element, key, v);\n      // Store the attribute if it does not exist in original.\n      if (!(key in original)) original[key] = currentValue;\n    }\n    element[ORIGINAL] = original;\n  };\n  const initState = element => {\n    if (element[STATES]) return;\n    element[STATES] = [];\n    return;\n  };\n  /**\n   * Set the states and update element.\n   */\n  const setState = (element, ...states) => {\n    initState(element);\n    element[STATES] = [...states];\n    updateState(element);\n  };\n  /**\n   * Remove the states and update element.\n   */\n  const removeState = (element, ...states) => {\n    initState(element);\n    for (const state of states) {\n      const index = element[STATES].indexOf(state);\n      if (index !== -1) {\n        element[STATES].splice(index, 1);\n      }\n    }\n    updateState(element);\n  };\n  const hasState = (element, state) => {\n    initState(element);\n    return element[STATES].indexOf(state) !== -1;\n  };\n  return {\n    setState,\n    removeState,\n    hasState\n  };\n}\nfunction isEmptyObject(obj) {\n  if (obj === undefined) return true;\n  if (typeof obj !== 'object') return false;\n  return Object.keys(obj).length === 0;\n}\n// A function to generate key for mark each view.\nfunction keyed(viewKey, markKey) {\n  return `${viewKey},${markKey}`;\n}\nexport function mergeState(options, states) {\n  // Index state by mark key and view key.\n  const views = Array.isArray(options) ? options : [options];\n  const markState = views.flatMap(view => view.marks.map(mark => [keyed(view.key, mark.key), mark.state]));\n  const state = {};\n  // Update each specified state.\n  for (const descriptor of states) {\n    const [key, defaults] = Array.isArray(descriptor) ? descriptor : [descriptor, {}];\n    // Update each specified mark state.\n    state[key] = markState.reduce((merged, mark) => {\n      // Normalize state.\n      const [markKey, markState = {}] = mark;\n      const selectedState = isEmptyObject(markState[key]) ? defaults : markState[key];\n      // Update each state attribute.\n      for (const [attr, value] of Object.entries(selectedState)) {\n        const oldValue = merged[attr];\n        const newValue = (data, index, array, element) => {\n          const k = keyed(element.__data__.viewKey, element.__data__.markKey);\n          if (markKey !== k) return oldValue === null || oldValue === void 0 ? void 0 : oldValue(data, index, array, element);\n          if (typeof value !== 'function') return value;\n          return value(data, index, array, element);\n        };\n        merged[attr] = newValue;\n      }\n      return merged;\n    }, {});\n  }\n  return state;\n}\n// @todo Support elements from different view.\nexport function createValueof(elements, datum) {\n  const elementIndex = new Map(elements.map((d, i) => [d, i]));\n  const fa = datum ? elements.map(datum) : elements;\n  return (d, e) => {\n    if (typeof d !== 'function') return d;\n    const i = elementIndex.get(e);\n    const fe = datum ? datum(e) : e;\n    return d(fe, i, fa, e);\n  };\n}\nexport function renderLink(_a) {\n  var {\n      link = false,\n      valueof = (d, element) => d,\n      coordinate\n    } = _a,\n    style = __rest(_a, [\"link\", \"valueof\", \"coordinate\"]);\n  const LINK_CLASS_NAME = 'element-link';\n  if (!link) return [() => {}, () => {}];\n  const pointsOf = element => element.__data__.points;\n  const pathPointsOf = (P0, P1) => {\n    const [, p1, p2] = P0;\n    const [p0,,, p3] = P1;\n    const P = [p1, p0, p3, p2];\n    return P;\n  };\n  const append = elements => {\n    var _a;\n    if (elements.length <= 1) return;\n    // Sort elements by normalized x to avoid cross.\n    const sortedElements = sort(elements, (e0, e1) => {\n      const {\n        x: x0\n      } = e0.__data__;\n      const {\n        x: x1\n      } = e1.__data__;\n      const dx = x0 - x1;\n      return dx;\n    });\n    for (let i = 1; i < sortedElements.length; i++) {\n      const p = d3Path();\n      const e0 = sortedElements[i - 1];\n      const e1 = sortedElements[i];\n      const [p0, p1, p2, p3] = pathPointsOf(pointsOf(e0), pointsOf(e1));\n      p.moveTo(...p0);\n      p.lineTo(...p1);\n      p.lineTo(...p2);\n      p.lineTo(...p3);\n      p.closePath();\n      const _b = mapObject(style, d => valueof(d, e0)),\n        {\n          fill = e0.getAttribute('fill')\n        } = _b,\n        rest = __rest(_b, [\"fill\"]);\n      const link = new Path({\n        className: LINK_CLASS_NAME,\n        style: Object.assign({\n          d: p.toString(),\n          fill,\n          zIndex: -2\n        }, rest)\n      });\n      // @ts-ignore\n      (_a = e0.link) === null || _a === void 0 ? void 0 : _a.remove();\n      e0.parentNode.appendChild(link);\n      // @ts-ignore\n      e0.link = link;\n    }\n  };\n  const remove = element => {\n    var _a;\n    (_a = element.link) === null || _a === void 0 ? void 0 : _a.remove();\n    element.link = null;\n  };\n  return [append, remove];\n}\n// Apply translate to mock slice out.\nexport function offsetTransform(element, offset, coordinate) {\n  const append = t => {\n    const {\n      transform\n    } = element.style;\n    return transform ? `${transform} ${t}` : t;\n  };\n  if (isPolar(coordinate)) {\n    const {\n      points\n    } = element.__data__;\n    const [p0, p1] = isTranspose(coordinate) ? reorder(points) : points;\n    const center = coordinate.getCenter();\n    const v0 = sub(p0, center);\n    const v1 = sub(p1, center);\n    const a0 = angle(v0);\n    const da = angleBetween(v0, v1);\n    const amid = a0 + da / 2;\n    const dx = offset * Math.cos(amid);\n    const dy = offset * Math.sin(amid);\n    return append(`translate(${dx}, ${dy})`);\n  }\n  if (isTranspose(coordinate)) return append(`translate(${offset}, 0)`);\n  return append(`translate(0, ${-offset})`);\n}\nexport function renderBackground(_a) {\n  var {\n      document,\n      background,\n      scale,\n      coordinate,\n      valueof\n    } = _a,\n    rest = __rest(_a, [\"document\", \"background\", \"scale\", \"coordinate\", \"valueof\"]);\n  const BACKGROUND_CLASS_NAME = 'element-background';\n  // Don't have background.\n  if (!background) return [() => {}, () => {}];\n  const extentOf = (scale, x, padding) => {\n    const ax = scale.invert(x);\n    const mid = x + scale.getBandWidth(ax) / 2;\n    const half = scale.getStep(ax) / 2;\n    const offset = half * padding;\n    return [mid - half + offset, mid + half - offset];\n  };\n  const sizeXOf = (element, padding) => {\n    const {\n      x: scaleX\n    } = scale;\n    if (!isOrdinalScale(scaleX)) return [0, 1];\n    const {\n      __data__: data\n    } = element;\n    const {\n      x\n    } = data;\n    const [e1, e2] = extentOf(scaleX, x, padding);\n    return [e1, e2];\n  };\n  const sizeYOf = (element, padding) => {\n    const {\n      y: scaleY\n    } = scale;\n    if (!isOrdinalScale(scaleY)) return [0, 1];\n    const {\n      __data__: data\n    } = element;\n    const {\n      y\n    } = data;\n    const [e1, e2] = extentOf(scaleY, y, padding);\n    return [e1, e2];\n  };\n  const bandShapeOf = (element, style) => {\n    const {\n      padding\n    } = style;\n    const [x1, x2] = sizeXOf(element, padding);\n    const [y1, y2] = sizeYOf(element, padding);\n    const points = [[x1, y1], [x2, y1], [x2, y2], [x1, y2]].map(d => coordinate.map(d));\n    const {\n      __data__: data\n    } = element;\n    const {\n      y: dy,\n      y1: dy1\n    } = data;\n    return rect(document, points, {\n      y: dy,\n      y1: dy1\n    }, coordinate, style);\n  };\n  // Shape without ordinal style.\n  // Clone and scale it.\n  const cloneShapeOf = (element, style) => {\n    const {\n        transform = 'scale(1.2, 1.2)',\n        transformOrigin = 'center center',\n        stroke = ''\n      } = style,\n      rest = __rest(style, [\"transform\", \"transformOrigin\", \"stroke\"]);\n    const finalStyle = Object.assign({\n      transform,\n      transformOrigin,\n      stroke\n    }, rest);\n    const shape = element.cloneNode(true);\n    for (const [key, value] of Object.entries(finalStyle)) {\n      shape.style[key] = value;\n    }\n    return shape;\n  };\n  const isOrdinalShape = () => {\n    const {\n      x,\n      y\n    } = scale;\n    return [x, y].some(isOrdinalScale);\n  };\n  const append = element => {\n    if (element.background) element.background.remove();\n    const _a = mapObject(rest, d => valueof(d, element)),\n      {\n        fill = '#CCD6EC',\n        fillOpacity = 0.3,\n        zIndex = -2,\n        padding = 0.001,\n        lineWidth = 0\n      } = _a,\n      style = __rest(_a, [\"fill\", \"fillOpacity\", \"zIndex\", \"padding\", \"lineWidth\"]);\n    const finalStyle = Object.assign(Object.assign({}, style), {\n      fill,\n      fillOpacity,\n      zIndex,\n      padding,\n      lineWidth\n    });\n    const shapeOf = isOrdinalShape() ? bandShapeOf : cloneShapeOf;\n    const shape = shapeOf(element, finalStyle);\n    shape.className = BACKGROUND_CLASS_NAME;\n    element.parentNode.parentNode.appendChild(shape);\n    element.background = shape;\n  };\n  const remove = element => {\n    var _a;\n    (_a = element.background) === null || _a === void 0 ? void 0 : _a.remove();\n    element.background = null;\n  };\n  const is = element => {\n    return element.className === BACKGROUND_CLASS_NAME;\n  };\n  return [append, remove, is];\n}\nexport function setCursor(root, cursor) {\n  // @ts-ignore\n  const canvas = root.getRootNode().defaultView;\n  const dom = canvas.getContextService().getDomElement();\n  if (dom === null || dom === void 0 ? void 0 : dom.style) {\n    root.cursor = dom.style.cursor;\n    dom.style.cursor = cursor;\n  }\n}\nexport function restoreCursor(root) {\n  setCursor(root, root.cursor);\n}\nexport function selectElementByData(elements, data, datum) {\n  return elements.find(d => Object.entries(data).every(([key, value]) => datum(d)[key] === value));\n}\nexport function getPointsR(point, nextPoint) {\n  return Math.sqrt(Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2));\n}\n// Points create path.\nexport function getPointsPath(points, isClose = false) {\n  const path = filter(points, d => !!d).map((d, i) => {\n    return [i === 0 ? 'M' : 'L', ...d];\n  });\n  if (isClose) {\n    path.push(['Z']);\n  }\n  return path;\n}\n// Get element.\nexport function getElements(plot) {\n  return plot.querySelectorAll('.element');\n}\n// Get Theta coordinate round path.\nexport function getThetaPath(center, points, isBig = 0) {\n  const path = [['M', ...points[1]]];\n  const innerRadius = getPointsR(center, points[1]);\n  const outerRadius = getPointsR(center, points[0]);\n  if (innerRadius === 0) {\n    path.push(['L', ...points[3]], ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]], ['Z']);\n  } else {\n    path.push(['A', innerRadius, innerRadius, 0, isBig, 0, ...points[2]], ['L', ...points[3]], ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]], ['Z']);\n  }\n  return path;\n}\nexport function maybeRoot(node, rootOf) {\n  if (rootOf(node)) return node;\n  let root = node.parent;\n  while (root && !rootOf(root)) root = root.parent;\n  return root;\n}","map":{"version":3,"names":["Path","AABB","path","d3Path","sort","filter","select","mapObject","ELEMENT_CLASS_NAME","PLOT_CLASS_NAME","isOrdinalScale","rect","isPolar","isTranspose","getStyle","reorder","angle","angleBetween","sub","selectG2Elements","root","selectAll","nodes","d","__removed__","selectFacetG2Elements","target","viewInstances","selectFacetViews","flatMap","container","options","parentKey","key","selectPlotArea","node","bboxOf","element","tagName","getRenderBounds","bounds","getGeometryBounds","aabb","setFromTransformedAABB","getWorldTransform","mousePosition","event","offsetX","offsetY","bbox","min","x","y","max","x1","y1","isOutX","isOutY","brushMousePosition","boundsOfBrushArea","Math","x0","y0","createColorKey","view","__data__","color","createXKey","createDatumof","views","Array","isArray","keyData","Map","marks","from","markState","keys","map","mark","keyed","data","index","markKey","viewKey","get","useState","style","valueof","setAttribute","v","STATES","ORIGINAL","updateState","states","original","stateStyle","reduce","mixedStyle","state","Object","assign","length","value","entries","currentValue","initState","setState","removeState","indexOf","splice","hasState","isEmptyObject","obj","undefined","mergeState","descriptor","defaults","merged","selectedState","attr","oldValue","newValue","array","k","createValueof","elements","datum","elementIndex","i","fa","e","fe","renderLink","_a","link","coordinate","__rest","LINK_CLASS_NAME","pointsOf","points","pathPointsOf","P0","P1","p1","p2","p0","p3","P","append","sortedElements","e0","e1","dx","p","moveTo","lineTo","closePath","_b","fill","getAttribute","rest","className","toString","zIndex","remove","parentNode","appendChild","offsetTransform","offset","t","transform","center","getCenter","v0","v1","a0","da","amid","cos","dy","sin","renderBackground","document","background","scale","BACKGROUND_CLASS_NAME","extentOf","padding","ax","invert","mid","getBandWidth","half","getStep","sizeXOf","scaleX","e2","sizeYOf","scaleY","bandShapeOf","x2","y2","dy1","cloneShapeOf","transformOrigin","stroke","finalStyle","shape","cloneNode","isOrdinalShape","some","fillOpacity","lineWidth","shapeOf","is","setCursor","cursor","canvas","getRootNode","defaultView","dom","getContextService","getDomElement","restoreCursor","selectElementByData","find","every","getPointsR","point","nextPoint","sqrt","pow","getPointsPath","isClose","push","getElements","plot","querySelectorAll","getThetaPath","isBig","innerRadius","outerRadius","maybeRoot","rootOf","parent"],"sources":["interaction/utils.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}